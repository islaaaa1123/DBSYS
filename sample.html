<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Registration</title>
  <style>
    body {
    margin: 0;
    padding: 0;
    background-color: #e4e4e4;
    font-family: Arial;
    display: flex;
    align-items: center;
    min-height: 100vh;
    flex-direction: column;
}

    .header {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
        width: 100%;
        height: 60px;
        padding-left: 10px;
        display: flex;
        justify-content: flex-start;
        align-items: center; 
        background: #b82a2a;
    }

    .header h1 {
        font-family: 'Times New Roman';
        font-size: 25px;
        font-weight: lighter;
        color: white;
        text-decoration: underline #b82a2a;
    }

    .registration {
        margin-top: 100px;
        position: relative;
        width: 500px;
        padding: 20px;
        border: 5px solid #b82a2a;
        border-radius: 10px;
        box-shadow: 0 0 0 10px white;
        background: #fff;
        text-align: center;
    }

    h2 {
        text-align: center; 
        font-family: Arial; 
        font-weight: bold; color: black;
    }

    form { 
        max-width: 400px; 
        margin: auto; 
    }

    input { 
        display: block; 
        width: 100%; 
        margin: 10px 0; 
        padding: 10px; 
    }

    button { 
        padding: 10px 20px; 
    }

    #qr-container img { 
        margin-top: 20px; 
        max-width: 200px; 
    }
  </style>
</head>
<body>

    <div class="header">
              <h1>MABALACAT CITY COLLEGE</h1>  
    </div>

        <div class="registration">
            <h2>Student Registration & QR Generator</h2>

            <form id="studentForm">
                <input type="text" name="name" placeholder="Student Name" required>
                <input type="text" name="studentId" placeholder="Student ID" required>
                <button type="submit">Add Student</button>
            </form>

            <div id="qr-container"></div>
        </div>
        

  <script>
    const form = document.getElementById("studentForm");
    const qrContainer = document.getElementById("qr-container");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = {
        name: form.name.value,
        studentId: form.studentId.value
      };

      try {
        const res = await fetch("/add-student", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await res.json();
        console.log(result);

        if(result.success) {
          qrContainer.innerHTML = `<p>Student Added Successfully!</p>
            <img src="${result.qrImage}" alt="QR Code">`;
          form.reset();
        } else {
          qrContainer.innerHTML = `<p style="color:red">${result.message || result.error}</p>`;
        }

      } catch(err) {
        console.error(err);
        qrContainer.innerHTML = `<p style="color:red">Server error</p>`;
      }
    });
  </script>

</body>
</html>